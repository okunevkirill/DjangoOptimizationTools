# DjangoOptimizationTools

This is a store server development repository based on a basic Django Framework course.
________

### Отличия от базового проекта:

- Откорректировал `fill_db`
- Откорректировал вёрстку корзины для корректного удаления товара при достижении счётчика товара значения `0` (min
  value=0)
- Поправил некорректную пагинацию при работе с категориями в шаблоне `products.html`
- Поправил некорректную работу при выходе из-под пользователя
- Исправил доступ к `админке` - ввел дополнительные разграничения (администратор, персонал, пользователь)
- Частично перевел контроллеры с функций на CBV
- Сделал более компактный импорт в `url`
- Удалил (_временно_) в шаблоне кнопку "добавления в корзину" для неавторизованного пользователя (нужно откорректировать
  js скрипт для переброса на страницу регистрации)
- Исправил отсутствие пересылки со страницы авторизации уже авторизированного пользователя (`LoginListView`)
- Изменил шаблон формы регистрации
- В модели корзины изменил название метода подсчёта общей суммы товара (`sum` - *предпочитаю не переопределять имена для
  встроенных функций*)
- Изменил шаблон продуктов в отображение `Новинок` - задел на отображение по дате создания продуктов
- Изменил событие в js скрипте корзины с `click` на `change`
- Поставил ограничение при изменении количество закупок определённого товара на предельное значение из склада
- Поставил автоматический откат транзакций для всего проекта (`Важно` - нужно осторожно работать с обработкой
  исключений`)
- Добавил название страницы детализации товара (через mixin - посчитал лишним выводить в название страницы имя товара)
- Поправил имя пути (url) при детализации продукта
- Подгрузил `статику` во все шаблоны админки (перестраховка)
- В шаблоне списков категорий и продуктов исправил кнопку восстановления-удаления (ToDo - надо переделать в js)
- Удалил из шаблона списков категорий и продуктов нижний footer в таблицах
- Добавил при создании пользователя возможность распределения ролей (администратор, персонал или обычный пользователь)

________

### Отличия от уроков

- Контекстный процессор корзины создал в приложение `baskets` вместо `mainapp`
- В отправке письма с подтверждением регистрации установил `fail_silently = True` - для отсутствия генерации
  ошибки `SMTPException`
- В методе `is_activation_key_expired` модели `User` явно указал часовой пояс (иначе имеем предупреждение от Pycharm)
- Сообщение об успешной отправке письма с кодом подтверждения в окне регистрации пользователя реализовал
  через `messages`

________

### ToDO

1. Поправить basket - необходимо подсчёт кол-ва товаров и финансов реализовать через пользователя (+поправить js скрипт)
2. Исправить
   bug `После получения ошибок при регистрации переходя по ссылки на авторизацию появляются аварийные сообщения со страницы регистрации`
3. Добавить возможность удалять аватар пользователя, а не перегружать.
4. Заменить alert сообщение при добавлении товара в корзину всплывающим сообщением
5. Перейти в контроллерах на слак
6. Для админки имеет смысл создать свои формы пользователя (не наследовать от authapp)
7. Для админки добавить вывод сообщений при не прохождении валидации
8. Поправить пагинацию на работу через словарь, а не отдельный контроллер
